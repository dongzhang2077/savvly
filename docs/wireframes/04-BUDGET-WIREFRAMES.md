# 预算管理界面线框图

## 📊 页面概览

预算管理是 Savvly 的核心功能，包括：
- **创建预算** - 简单快速的预算创建流程
- **编辑预算** - 灵活调整预算金额和回滚策略
- **预算详情** - 查看预算使用情况和相关交易
- **回滚设置** - Savvly 独特的预算回滚功能

---

## 1. 预算列表页面 (Budget List)

### 桌面端布局

```
┌────────────────────────────────────────────────────────────────────────────┐
│  💰 Savvly        🏠 仪表板  📊 预算  💳 交易  ⚙️ 设置      👤 张三  [登出] │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  📊 预算管理                                                               │
│                                                                            │
│  ┌────────────────────────────────────────────────────────────────┐       │
│  │  本月预算总览 (10月 2025)                        [+ 创建预算]  │       │
│  │                                                                │       │
│  │  总预算: $2,200    已用: $935    剩余: $1,265    进度: 42%    │       │
│  │  ████████░░░░░░░░░░░░                                         │       │
│  └────────────────────────────────────────────────────────────────┘       │
│                                                                            │
│  ┌─────────────────────┐  筛选: [本月 ▼] [所有类别 ▼]  排序: [金额 ▼]   │
│  │                     │                                                   │
│  │  [视图切换]         │                                                   │
│  │  ☰ 列表  □ 网格    │                                                   │
│  │                     │                                                   │
│  └─────────────────────┘                                                   │
│                                                                            │
│  ┌──────────────────────────────────────────────────────────────────┐     │
│  │                                                                  │     │
│  │  ┌─────────────┬─────────────┬─────────────┬─────────────────┐ │     │
│  │  │ 类别        │ 已用/预算   │ 进度        │ 操作            │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 🍔 食品     │ $280 / $400 │ ████░░ 70%  │ [编辑] [详情]   │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 🚗 交通     │ $95 / $200  │ ███░░░ 48%  │ [编辑] [详情]   │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 🎬 娱乐     │ $60 / $150  │ ███░░░ 40%  │ [编辑] [详情]   │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 🏠 房租     │$1200/$1200  │ █████ 100%  │ [编辑] [详情]   │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 💡 公用事业 │ $85 / $150  │ ███░░░ 57%  │ [编辑] [详情]   │ │     │
│  │  ├─────────────┼─────────────┼─────────────┼─────────────────┤ │     │
│  │  │ 📱 订阅     │ $45 / $100  │ ███░░░ 45%  │ [编辑] [详情]   │ │     │
│  │  └─────────────┴─────────────┴─────────────┴─────────────────┘ │     │
│  │                                                                  │     │
│  └──────────────────────────────────────────────────────────────────┘     │
│                                                                            │
│  [+ 创建新预算]                                                            │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

表格规格：
- 表头：font-semibold bg-gray-50
- 行高：h-16 (64px)
- 悬停：hover:bg-gray-50
- 进度条：h-2 rounded-full
```

### 网格视图（替代布局）

```
┌────────────────────────────────────────────────────────────────────────────┐
│  📊 预算管理                                          [视图] ☰ □           │
│                                                                            │
│  ┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐          │
│  │ 🍔 食品          │ │ 🚗 交通          │ │ 🎬 娱乐          │          │
│  │                  │ │                  │ │                  │          │
│  │ $280 / $400      │ │ $95 / $200       │ │ $60 / $150       │          │
│  │ ████████░░ 70%   │ │ ████░░░░ 48%     │ │ ███░░░░░ 40%     │          │
│  │                  │ │                  │ │                  │          │
│  │ 剩余 $120 ✓      │ │ 剩余 $105 ✓      │ │ 剩余 $90 ✓       │          │
│  │                  │ │                  │ │                  │          │
│  │ [编辑] [详情]    │ │ [编辑] [详情]    │ │ [编辑] [详情]    │          │
│  └──────────────────┘ └──────────────────┘ └──────────────────┘          │
│                                                                            │
│  ┌──────────────────┐ ┌──────────────────┐ ┌──────────────────┐          │
│  │ 🏠 房租          │ │ 💡 公用事业       │ │ 📱 订阅          │          │
│  │ ...              │ │ ...              │ │ ...              │          │
│  └──────────────────┘ └──────────────────┘ └──────────────────┘          │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 创建预算页面 (Create Budget)

### 表单布局

```
┌────────────────────────────────────────────────────────────────────────────┐
│  [← 返回预算列表]                                       💰 Savvly          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│                   ┌──────────────────────────────────────┐                │
│                   │                                      │                │
│                   │  📊 创建新预算                       │                │
│                   │                                      │                │
│                   │  让我们为你的支出设置一个预算        │                │
│                   │                                      │                │
│                   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │                │
│                   │                                      │                │
│                   │  预算类别 *                          │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ 🍔 食品                  [▼]   │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │                                      │                │
│                   │  常用类别:                           │                │
│                   │  [🍔 食品] [🚗 交通] [🎬 娱乐]      │                │
│                   │  [🏠 房租] [💡 水电] [📱 订阅]      │                │
│                   │  [🏥 医疗] [📚 教育] [➕ 自定义]    │                │
│                   │                                      │                │
│                   │  预算金额 *                          │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ $ 400.00                       │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │  💡 上个月你在食品上花了 $310       │                │
│                   │                                      │                │
│                   │  月份                                │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ 10月 2025            [▼]       │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │                                      │                │
│                   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │                │
│                   │                                      │                │
│                   │  🔄 预算回滚策略                     │                │
│                   │                                      │                │
│                   │  ○ 完全回滚 (推荐)                   │                │
│                   │     未用预算100%转入下月             │                │
│                   │     💡 最适合：固定开支(房租、订阅)  │                │
│                   │                                      │                │
│                   │  ● 部分回滚                          │                │
│                   │     未用预算50%转入下月              │                │
│                   │     💡 最适合：灵活开支(娱乐、购物)  │                │
│                   │                                      │                │
│                   │     回滚百分比: [========○==] 50%   │                │
│                   │                                      │                │
│                   │  ○ 不回滚                            │                │
│                   │     每月重置预算                     │                │
│                   │     💡 最适合：严格控制的类别        │                │
│                   │                                      │                │
│                   │  ○ 目标导向                          │                │
│                   │     累积到目标金额                   │                │
│                   │     💡 最适合：储蓄目标              │                │
│                   │                                      │                │
│                   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │                │
│                   │                                      │                │
│                   │  高级选项 (可选) [展开 ▼]           │                │
│                   │                                      │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ [取消]        [创建预算 →]     │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │                                      │                │
│                   └──────────────────────────────────────┘                │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

表单规格：
- 容器宽度：max-w-2xl (672px)
- 标签字号：text-sm font-medium
- 输入框高度：h-12 (48px)
- 输入框圆角：rounded-md (6px)
- 单选按钮：h-5 w-5
```

### 高级选项展开

```
┌──────────────────────────────────────┐
│  高级选项 [收起 ▲]                   │
│                                      │
│  ☐ 这是固定预算                      │
│     (每月金额相同，如房租、订阅)      │
│                                      │
│  ☐ 这是税务预留                      │
│     (自动从收入扣除)                  │
│                                      │
│  备注 (可选)                          │
│  ┌────────────────────────────────┐  │
│  │ 包括杂货、外出就餐...          │  │
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

---

## 3. 编辑预算页面 (Edit Budget)

### 表单布局（与创建类似）

```
┌────────────────────────────────────────────────────────────────────────────┐
│  [← 返回]                                                                  │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│                   ┌──────────────────────────────────────┐                │
│                   │                                      │                │
│                   │  ✏️ 编辑预算 - 🍔 食品               │                │
│                   │                                      │                │
│                   │  预算金额 *                          │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ $ 400.00                       │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │                                      │                │
│                   │  当前使用: $280 (70%)                │                │
│                   │  ████████░░░░░░░░░░                 │                │
│                   │                                      │                │
│                   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │                │
│                   │                                      │                │
│                   │  🔄 回滚策略                         │                │
│                   │  ● 部分回滚 (50%)                    │                │
│                   │                                      │                │
│                   │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │                │
│                   │                                      │                │
│                   │  ⚠️ 更改将从下月生效                 │                │
│                   │  本月预算保持 $400                   │                │
│                   │                                      │                │
│                   │  ┌────────────────────────────────┐ │                │
│                   │  │ [删除预算] [取消] [保存更改 →] │ │                │
│                   │  └────────────────────────────────┘ │                │
│                   │                                      │                │
│                   └──────────────────────────────────────┘                │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

注意：
- [删除预算] 按钮使用 text-red-600，非红色背景
- 显示当前使用情况作为参考
- 说明更改生效时间
```

---

## 4. 预算详情页面 (Budget Detail)

### 详情页布局

```
┌────────────────────────────────────────────────────────────────────────────┐
│  [← 返回预算列表]                                       💰 Savvly          │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  🍔 食品预算详情                                           [编辑] [删除]   │
│                                                                            │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │                                                                    │   │
│  │  10月 2025                                                         │   │
│  │                                                                    │   │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │   │
│  │  │ 已用            │  │ 剩余            │  │ 预算            │  │   │
│  │  │ $280            │  │ $120            │  │ $400            │  │   │
│  │  │ 70%             │  │ 30%             │  │                 │  │   │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘  │   │
│  │                                                                    │   │
│  │  ████████████████░░░░░░░░ 70%                                     │   │
│  │                                                                    │   │
│  │  💡 你做得很好！还剩 $120 可用                                     │   │
│  │                                                                    │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │  📊 趋势                                                           │   │
│  │                                                                    │   │
│  │  [简单柱状图：过去6个月的食品支出]                                 │   │
│  │                                                                    │   │
│  │  6月   7月   8月   9月   10月  11月                               │   │
│  │  $320  $295  $310  $280  $280  -                                  │   │
│  │                                                                    │   │
│  │  平均: $297/月                                                     │   │
│  │                                                                    │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │  🔄 回滚设置                                                       │   │
│  │                                                                    │   │
│  │  策略: 部分回滚 (50%)                                              │   │
│  │  下月将回滚: $60 (如果现在结束)                                    │   │
│  │                                                                    │   │
│  │  💡 未用预算的一半将转入下月，                                     │   │
│  │     帮你在灵活性和节制之间找到平衡。                               │   │
│  │                                                                    │   │
│  │  <a>更改回滚策略 →</a>                                             │   │
│  │                                                                    │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │  💳 相关交易 (12 笔)                           <a>查看全部 →</a>   │   │
│  │                                                                    │   │
│  │  ┌──────────────────────────────────────────────────────────────┐ │   │
│  │  │ 🍔 Whole Foods                                               │ │   │
│  │  │ -$45.80        10月27日 12:30pm                 [编辑] [删除]│ │   │
│  │  └──────────────────────────────────────────────────────────────┘ │   │
│  │                                                                    │   │
│  │  ┌──────────────────────────────────────────────────────────────┐ │   │
│  │  │ ☕ Starbucks                                                  │ │   │
│  │  │ -$5.50         10月27日 8:15am                  [编辑] [删除]│ │   │
│  │  └──────────────────────────────────────────────────────────────┘ │   │
│  │                                                                    │   │
│  │  ┌──────────────────────────────────────────────────────────────┐ │   │
│  │  │ 🛒 Costco                                                     │ │   │
│  │  │ -$125.30       10月24日                         [编辑] [删除]│ │   │
│  │  └──────────────────────────────────────────────────────────────┘ │   │
│  │                                                                    │   │
│  │  [+ 添加交易到此预算]                                             │   │
│  │                                                                    │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 删除预算确认模态框

```
                     ┌──────────────────────────────────────┐
                     │                                      │
                     │  ⚠️ 确认删除预算                     │
                     │                                      │
                     │  你确定要删除 "🍔 食品" 预算吗？     │
                     │                                      │
                     │  这将会:                             │
                     │  • 删除所有历史预算记录              │
                     │  • 相关交易将变为未分类              │
                     │  • 此操作无法撤销                    │
                     │                                      │
│                    │  ┌────────────────────────────────┐  │
                     │  │ [取消]      [确认删除]         │  │
                     │  └────────────────────────────────┘  │
                     │                                      │
                     └──────────────────────────────────────┘

样式：
- 背景遮罩：bg-black/50
- 模态框：bg-white rounded-xl shadow-2xl
- [确认删除] 按钮：text-red-600 (非红色背景)
- 图标：橙色 (⚠️) 非红色
```

---

## 6. 回滚策略详解模态框

### 教育型弹窗

```
┌──────────────────────────────────────────────────────────────┐
│  🔄 预算回滚策略                                [×]          │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  什么是预算回滚？                                            │
│                                                              │
│  传统预算 App 每月重置预算，惩罚你的节省行为。              │
│  Savvly 的回滚功能奖励你的节省，让未用预算延续价值。        │
│                                                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                              │
│  四种策略:                                                   │
│                                                              │
│  1️⃣ 完全回滚 (100%)                                         │
│     ✓ 所有未用预算转入下月                                   │
│     ✓ 适合: 固定开支 (房租、订阅)                            │
│     ✓ 示例: 本月剩余 $50 → 下月可用 $450                    │
│                                                              │
│  2️⃣ 部分回滚 (自定义 10-90%)                                │
│     ✓ 部分未用预算转入下月                                   │
│     ✓ 适合: 灵活开支 (食品、娱乐)                            │
│     ✓ 示例: 剩余 $50, 50%回滚 → 下月可用 $425               │
│                                                              │
│  3️⃣ 不回滚 (0%)                                             │
│     ✓ 每月完全重置                                           │
│     ✓ 适合: 严格控制的类别                                   │
│     ✓ 示例: 剩余 $50 → 下月重新开始 $400                    │
│                                                              │
│  4️⃣ 目标导向                                                │
│     ✓ 累积到目标金额                                         │
│     ✓ 适合: 储蓄、大额采购计划                               │
│     ✓ 示例: 目标 $2000, 每月剩余累积                         │
│                                                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│                                                              │
│  💡 提示: 你可以随时更改策略，新策略从下月生效              │
│                                                              │
│  [知道了]                                                    │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 7. 批量操作界面

### 批量编辑预算

```
┌────────────────────────────────────────────────────────────────────────────┐
│  📊 预算管理                                                               │
│                                                                            │
│  ☐ 全选    已选择 3 个预算                   [批量调整] [批量复制]        │
│                                                                            │
│  ┌──────────────────────────────────────────────────────────────────┐     │
│  │                                                                  │     │
│  │  ┌───┬─────────────┬─────────────┬─────────────┬──────────────┐ │     │
│  │  │ ☑ │ 类别        │ 已用/预算   │ 进度        │ 操作         │ │     │
│  │  ├───┼─────────────┼─────────────┼─────────────┼──────────────┤ │     │
│  │  │ ☑ │ 🍔 食品     │ $280 / $400 │ ████░░ 70%  │ [编辑][详情] │ │     │
│  │  ├───┼─────────────┼─────────────┼─────────────┼──────────────┤ │     │
│  │  │ ☑ │ 🚗 交通     │ $95 / $200  │ ███░░░ 48%  │ [编辑][详情] │ │     │
│  │  ├───┼─────────────┼─────────────┼─────────────┼──────────────┤ │     │
│  │  │ ☑ │ 🎬 娱乐     │ $60 / $150  │ ███░░░ 40%  │ [编辑][详情] │ │     │
│  │  ├───┼─────────────┼─────────────┼─────────────┼──────────────┤ │     │
│  │  │ ☐ │ 🏠 房租     │$1200/$1200  │ █████ 100%  │ [编辑][详情] │ │     │
│  │  └───┴─────────────┴─────────────┴─────────────┴──────────────┘ │     │
│  │                                                                  │     │
│  └──────────────────────────────────────────────────────────────────┘     │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘

批量调整模态框：
┌──────────────────────────────────────┐
│  批量调整 (3 个预算)                 │
│                                      │
│  调整方式:                           │
│  ○ 增加固定金额                      │
│  ● 按百分比调整                      │
│  ○ 设置为固定值                      │
│                                      │
│  百分比: [====○====] +10%           │
│                                      │
│  预览:                               │
│  • 食品: $400 → $440                │
│  • 交通: $200 → $220                │
│  • 娱乐: $150 → $165                │
│                                      │
│  [取消]           [应用更改 →]      │
└──────────────────────────────────────┘
```

---

## 8. 移动端预算管理

### 移动端列表视图

```
┌───────────────────────────────────┐
│ 📊 预算管理         [+]  [⋮]     │
├───────────────────────────────────┤
│                                   │
│ ┌───────────────────────────────┐ │
│ │ 本月总览 (10月)               │ │
│ │ 已用 $935 / 总预算 $2,200     │ │
│ │ ████████░░░ 42%               │ │
│ └───────────────────────────────┘ │
│                                   │
│ ┌───────────────────────────────┐ │
│ │ 🍔 食品                       │ │
│ │ $280 / $400                   │ │
│ │ ████████░░ 70%                │ │
│ │ 剩余 $120 ✓                   │ │
│ │ <a>详情 →</a>                 │ │
│ └───────────────────────────────┘ │
│                                   │
│ ┌───────────────────────────────┐ │
│ │ 🚗 交通                       │ │
│ │ $95 / $200                    │ │
│ │ ████░░░░ 48%                  │ │
│ │ 剩余 $105 ✓                   │ │
│ │ <a>详情 →</a>                 │ │
│ └───────────────────────────────┘ │
│                                   │
│ [显示更多 ↓]                      │
│                                   │
└───────────────────────────────────┘

交互：
- 左滑卡片显示 [编辑] [删除]
- 点击卡片进入详情
- 下拉刷新
```

---

## 9. 智能预算建议

### AI 辅助创建

```
┌──────────────────────────────────────┐
│  📊 创建新预算                       │
│                                      │
│  预算类别: 🍔 食品                   │
│                                      │
│  预算金额:                           │
│  ┌────────────────────────────────┐  │
│  │ $ 400.00                       │  │
│  └────────────────────────────────┘  │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ 💡 智能建议                     │  │
│  │                                │  │
│  │ 基于你过去3个月的支出分析:      │  │
│  │                                │  │
│  │ • 平均: $297/月                │  │
│  │ • 最高: $320 (6月)             │  │
│  │ • 最低: $280 (9月)             │  │
│  │                                │  │
│  │ 建议预算: $350                 │  │
│  │                                │  │
│  │ 这将给你 15% 的缓冲空间，       │  │
│  │ 同时鼓励节制。                  │  │
│  │                                │  │
│  │ [应用建议]                      │  │
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

---

## 10. 实现清单

### 页面组件
- [ ] BudgetListPage (预算列表)
- [ ] CreateBudgetPage (创建预算)
- [ ] EditBudgetPage (编辑预算)
- [ ] BudgetDetailPage (预算详情)
- [ ] BudgetCard (预算卡片)
- [ ] RolloverStrategyModal (回滚策略说明)
- [ ] DeleteBudgetModal (删除确认)
- [ ] BulkEditModal (批量编辑)
- [ ] SmartSuggestion (AI 建议)

### API 集成
- [ ] GET /api/budgets (获取预算列表)
- [ ] POST /api/budgets (创建预算)
- [ ] PUT /api/budgets/:id (更新预算)
- [ ] DELETE /api/budgets/:id (删除预算)
- [ ] GET /api/budgets/:id (预算详情)
- [ ] GET /api/budgets/:id/transactions (相关交易)

### 表单验证
- [ ] 类别必填
- [ ] 金额必须 > 0
- [ ] 月份/年份有效性
- [ ] 回滚百分比 0-100
- [ ] 防止重复类别

---

**文档版本**: v1.0
**页面数量**: 4 个主要页面 + 多个模态框
**状态**: ✅ 设计完成，待实现
